"use strict";var _compiler=require("../../compiler"),_shared=require("../../common/shared"),_utils=require("../../common/utils");module.exports=function(e,r){var a=this;this.cacheable&&this.cacheable();var c=this.async();(0,_compiler.parseScript)(e).then(function(e){var t=e.parsed,i=(0,_shared.updateSourceScript)(t);t=i.fileCont,(0,_utils.logWarn)(a,i.logFeatureList);var o=t.match(/require\s*\(['"]@([^\/()]+?)['"]\)/g);o&&o.length>0&&o.forEach(function(e){t=t.replace(e,e.replace("require","$app_require$").replace("@","@app-module/"))});var p=t.match(/import\s+([^()]+?)\s+from\s+['"]@([^\/()]+?)['"]/g);p&&p.length>0&&p.forEach(function(e){t=t.replace(e,e.replace("import","var").replace("from","= $app_require$(").replace("@","@app-module/")+");")}),c(null,"module.exports = function(module, exports, $app_require$){"+t+"}",r)}).catch(function(e){c(e,"")})};