"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function extend(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("function"==typeof Object.assign)Object.assign.apply(Object,[e].concat(r));else{var o=r.shift();for(var a in o)e[a]=o[a];r.length&&extend.apply(void 0,[e].concat(r))}return e}function merge(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.length&&r.forEach(function(t){e=e.concat(t)}),e}function hyphenedToCamelCase(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function camelCaseToHyphened(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function getNameByPath(e){return _path2.default.basename(e).replace(/\..*$/,"")}function getFileNameWithHash(e,t){var r=_path2.default.relative(".",e);return"./"+r+"?"+(0,_hashSum2.default)(r+t)}function isEmptyObject(e){if(!e)return!0;for(var t in e)return!1;return!0}function isPlainObject(e){return toString.call(e)===OBJECT_STRING}function loadBabelModule(e){var t=_path2.default.resolve(__dirname,"..","node_modules",e),r=_path2.default.resolve(process.cwd(),"node_modules",e);return _fs2.default.existsSync(t)?t:_fs2.default.existsSync(r)?r:e}function getFilenameByPath(e){return _path2.default.relative(".",e)}function stringifyFunction(e,t){return"function"==typeof t?FUNC_START+t.toString()+FUNC_END:t}function logWarn(e,t,r){t&&t.length&&t.forEach(function(t){var n=t.line&&t.column?"\t@"+t.line+":"+t.column:"";r||(t.reason.startsWith("ERROR")?colorconsole.error(e.context,t.reason+n):colorconsole.warn(e.context,t.reason+n))})}function makeRequireString(e,t,r){return print({loader:t,filepath:r}),"require("+_loaderUtils2.default.stringifyRequest(e,t?"!!"+t+"!"+r:""+r)+")\n"}function stringifyLoaders(e){return e.map(function(e){if("string"==typeof e)return e;var t=e.name,r=[];if(e.query)for(var n in e.query){var o=e.query[n];null!=o&&(!0===o?r.push(n):(o instanceof Array&&r.push(n+"[]="+o.join(",")),r.push(n+"="+o)))}return t+(r.length?"?"+r.join("&"):"")}).join("!")}function generateMap(e,t,r){var n=e.resourcePath,o=getFileNameWithHash(n),a=_path2.default.resolve("."),i=new _sourceMap.SourceMapGenerator({sourceRoot:a,skipValidation:!0});i.setSourceContent(o,t);var l=!0,s=!1,u=void 0;try{for(var c,p=r[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=c.value,d=f.original,h=f.generated;i.addMapping({source:o,original:d,generated:h})}}catch(e){s=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw u}}return i}function consumeMap(e,t,r){var n=new _sourceMap.SourceMapConsumer(r),o=void 0,a=[],i=[],l={};return splitSourceLine(t).forEach(function(e,t){t+=1;var r=n.originalPositionFor({line:t,column:0});r.source&&(o=r.source,a.push({line:r.line,column:r.column}),i.push({line:t,column:0}),l["line-"+t+"-column-0"]={line:r.line,column:r.column})}),{source:o,original:a,generated:i,mapping:l,sourcesContent:n.sourcesContent}}function mkdirsSync(e){return!!_fs2.default.existsSync(e)||(mkdirsSync(_path2.default.dirname(e))?(_fs2.default.mkdirSync(e),!0):void 0)}function splitSourceLine(e){return e.split(REGEXP_LINE)}function print(e){if(showLog){var t="";if("string"==typeof e)t="######### "+e+" #########";else for(var r in e)t+="######### "+r+" : "+e[r]+" #########\n";console.log(t)}}function splitAttr(e,t){var r=[];if(t)switch(e.forEach(function(e,t){r[t]={},r[t].n=e}),t.length){case 1:e.forEach(function(e,n){r[n].v=t[0]});break;case 2:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[0]});break;case 3:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[n]});break;default:e.forEach(function(e,n){r[n].v=t[n]})}return r}function isValidValue(e){return"number"==typeof e||"string"==typeof e}function prependLevel(e,t){!logLevelMap[e]&&function(t){var r=t.toUpperCase().substr(0,4);r.paddEnd&&r.paddEnd(4),logLevelMap[e]=r}(e),"string"==typeof t[0]&&t[0].length>1&&"["!==t[0][0]&&(t[0]="["+logLevelMap[e]+"] "+t[0])}function equals(e,t,r){if(r){for(var n=arguments.length,o=Array(n>3?n-3:0),a=3;a<n;a++)o[a-3]=arguments[a];if(r.apply(void 0,[e,t].concat(o)))return!0}var i=Object.prototype.toString.call(e);if(i!==Object.prototype.toString.call(t))return!1;if("[object Null]"===i||"[object Undefined]"===i)return!0;if("[object Object]"!==i&&"[object Array]"!==i)return Object(e).toString()===Object(t).toString();var l={};Object.keys(e).forEach(function(e){return l[e]=!0}),Object.keys(t).forEach(function(e){return l[e]=!0});for(var s=Object.keys(l),u=0;u<s.length;u++){var c=s[u];if(!equals(e[c],t[c],r,c))return!1}return!0}function resolvePath(e,t){if(t&&!_path2.default.isAbsolute(e)){var r=_path2.default.join(_path2.default.dirname(t),e),n=_path2.default.relative(_path2.default.resolve(".","./src"),r);e=_path2.default.join("/",n)}return e}function getWebpackOptions(e){return e.options||{}}function isUXRender(e){return e===UX_TYPE.PAGE}function isUXEntry(e){return e===UX_TYPE.PAGE||e===UX_TYPE.APP}function collectResFile(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=_path2.default.join(t,o),l={},s=void 0;return e.readdirSync(i).forEach(function(u){var c=_path2.default.join(i,u),p=e.statSync(c),f=_path2.default.basename(c),d=_path2.default.extname(c);if(p.isFile())("manifest.json"===f||n.indexOf(d)<0)&&(s=_path2.default.join(r,o,_path2.default.basename(u)),s=s.replace(/\\/g,"/"),l[s]=c);else if(p.isDirectory()){var h=_path2.default.join(o,u),_=a||"common"===u.toLowerCase();Object.assign(l,collectResFile(e,t,r,n,h,_))}}),l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FRAG_TYPE=exports.UX_TYPE=exports.colorconsole=exports.FUNC_END_REG=exports.FUNC_END=exports.FUNC_START_REG=exports.FUNC_START=void 0,exports.extend=extend,exports.merge=merge,exports.hyphenedToCamelCase=hyphenedToCamelCase,exports.camelCaseToHyphened=camelCaseToHyphened,exports.getNameByPath=getNameByPath,exports.getFileNameWithHash=getFileNameWithHash,exports.isEmptyObject=isEmptyObject,exports.isPlainObject=isPlainObject,exports.loadBabelModule=loadBabelModule,exports.getFilenameByPath=getFilenameByPath,exports.stringifyFunction=stringifyFunction,exports.logWarn=logWarn,exports.makeRequireString=makeRequireString,exports.stringifyLoaders=stringifyLoaders,exports.generateMap=generateMap,exports.consumeMap=consumeMap,exports.mkdirsSync=mkdirsSync,exports.splitSourceLine=splitSourceLine,exports.print=print,exports.splitAttr=splitAttr,exports.isValidValue=isValidValue,exports.equals=equals,exports.resolvePath=resolvePath,exports.getWebpackOptions=getWebpackOptions,exports.isUXRender=isUXRender,exports.isUXEntry=isUXEntry,exports.collectResFile=collectResFile;var _path=require("path"),_path2=_interopRequireDefault(_path),_loaderUtils=require("loader-utils"),_loaderUtils2=_interopRequireDefault(_loaderUtils),_hashSum=require("hash-sum"),_hashSum2=_interopRequireDefault(_hashSum),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_sourceMap=require("source-map"),_chalk=require("chalk"),_chalk2=_interopRequireDefault(_chalk),toString=Object.prototype.toString,OBJECT_STRING="[object Object]",FUNC_START=exports.FUNC_START="#####FUNC_START#####",FUNC_START_REG=exports.FUNC_START_REG=new RegExp("[\"']"+FUNC_START,"g"),FUNC_END=exports.FUNC_END="#####FUNC_END#####",FUNC_END_REG=exports.FUNC_END_REG=new RegExp(FUNC_END+"[\"']","g"),REGEXP_LINE=/\r?\n/g,showLog=!1,logLevelMap={},colorconsole=exports.colorconsole={trace:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("trace",r),(e=console).trace.apply(e,_toConsumableArray(r))},log:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];prependLevel("log",t),console.log(_chalk2.default.green.apply(_chalk2.default,_toConsumableArray(t)))},info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];prependLevel("info",t),console.info(_chalk2.default.green.apply(_chalk2.default,_toConsumableArray(t)))},warn:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("warn",r),console.warn((e=_chalk2.default.yellow).bold.apply(e,_toConsumableArray(r)))},error:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("error",r),console.error((e=_chalk2.default.red).bold.apply(e,_toConsumableArray(r)))},throw:function(){var e;throw new Error((e=_chalk2.default.red).bold.apply(e,arguments))}},UX_TYPE=exports.UX_TYPE={APP:"app",PAGE:"page",COMP:"comp"},FRAG_TYPE=exports.FRAG_TYPE={IMPORT:"import",TEMPLATE:"template",STYLE:"style",SCRIPT:"script"};